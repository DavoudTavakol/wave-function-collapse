<!DOCTYPE html>
<!-- saved from url=(0074)https://www.boristhebrave.com/2020/04/13/wave-function-collapse-explained/ -->
<html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="me" href="https://mastodon.gamedev.place/@boris_brave">
<link rel="pingback" href="https://www.boristhebrave.com/xmlrpc.php">
<script type="text/x-mathjax-config;executed=true">
  // The website uses light fonts, but mathjax only supports normal. 
  // Scale things to make the difference slightle less
  MathJax.Hub.Config({
    "HTML-CSS": { scale: 90}
  });
</script>

<title>Wave Function Collapse Explained – BorisTheBrave.Com</title>
<meta name="robots" content="max-image-preview:large">
<link rel="dns-prefetch" href="https://secure.gravatar.com/">
<link rel="dns-prefetch" href="https://stats.wp.com/">
<link rel="dns-prefetch" href="https://fonts.googleapis.com/">
<link rel="dns-prefetch" href="https://v0.wordpress.com/">
<link rel="dns-prefetch" href="https://jetpack.wordpress.com/">
<link rel="dns-prefetch" href="https://s0.wp.com/">
<link rel="dns-prefetch" href="https://public-api.wordpress.com/">
<link rel="dns-prefetch" href="https://0.gravatar.com/">
<link rel="dns-prefetch" href="https://1.gravatar.com/">
<link rel="dns-prefetch" href="https://2.gravatar.com/">
<link rel="alternate" type="application/rss+xml" title="BorisTheBrave.Com » Feed" href="https://www.boristhebrave.com/feed/">
<link rel="alternate" type="application/rss+xml" title="BorisTheBrave.Com » Comments Feed" href="https://www.boristhebrave.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="BorisTheBrave.Com » Wave Function Collapse Explained Comments Feed" href="https://www.boristhebrave.com/2020/04/13/wave-function-collapse-explained/feed/">
<script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.boristhebrave.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.2.2"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){p.clearRect(0,0,i.width,i.height),p.fillText(e,0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(t,0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(p&&p.fillText)switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s("\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!s("\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!s("\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!s("\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c\udfff","\ud83e\udef1\ud83c\udffb\u200b\ud83e\udef2\ud83c\udfff")}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(e=t.source||{}).concatemoji?c(e.concatemoji):e.wpemoji&&e.twemoji&&(c(e.twemoji),c(e.wpemoji)))}(window,document,window._wpemojiSettings);
</script><script src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/wp-emoji-release.min.js.Download" type="text/javascript" defer=""></script>
<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel="stylesheet" id="wp-block-library-css" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/style.min.css" type="text/css" media="all">
<style id="wp-block-library-inline-css" type="text/css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="jetpack-videopress-video-block-view-css" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/view.css" type="text/css" media="all">
<link rel="stylesheet" id="mediaelement-css" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/mediaelementplayer-legacy.min.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-mediaelement-css" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/wp-mediaelement.min.css" type="text/css" media="all">
<link rel="stylesheet" id="classic-theme-styles-css" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/classic-themes.min.css" type="text/css" media="all">
<style id="global-styles-inline-css" type="text/css">
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}
</style>
<link rel="stylesheet" id="ce_responsive-css" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/video-container.min.css" type="text/css" media="all">
<link rel="stylesheet" id="sketch-style-css" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/style.css" type="text/css" media="all">
<link rel="stylesheet" id="sketch-lato-css" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/css" type="text/css" media="all">
<link rel="stylesheet" id="genericons-css" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/genericons.css" type="text/css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/jetpack.css" type="text/css" media="all">
<script type="text/javascript" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/DOMPurify.min.js.Download" id="bodhi-dompurify-library-js"></script>
<script type="text/javascript" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/jquery.min.js.Download" id="jquery-core-js"></script>
<script type="text/javascript" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/jquery-migrate.min.js.Download" id="jquery-migrate-js"></script>
<script type="text/javascript" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/svgs-inline-min.js.Download" id="bodhi_svg_inline-js"></script>
<script type="text/javascript" id="bodhi_svg_inline-js-after">
cssTarget="img.style-svg";ForceInlineSVGActive="false";frontSanitizationEnabled="on";
</script>
<link rel="https://api.w.org/" href="https://www.boristhebrave.com/wp-json/"><link rel="alternate" type="application/json" href="https://www.boristhebrave.com/wp-json/wp/v2/posts/491"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.boristhebrave.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.boristhebrave.com/wp-includes/wlwmanifest.xml">
<meta name="generator" content="WordPress 6.2.2">
<link rel="canonical" href="https://www.boristhebrave.com/2020/04/13/wave-function-collapse-explained/">
<link rel="shortlink" href="https://wp.me/p8HD73-7V">
<link rel="alternate" type="application/json+oembed" href="https://www.boristhebrave.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.boristhebrave.com%2F2020%2F04%2F13%2Fwave-function-collapse-explained%2F">
<link rel="alternate" type="text/xml+oembed" href="https://www.boristhebrave.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.boristhebrave.com%2F2020%2F04%2F13%2Fwave-function-collapse-explained%2F&amp;format=xml">
	<style>img#wpstats{display:none}</style>
		<style type="text/css">.broken_link, a.broken_link {
	text-decoration: line-through;
}</style>
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="Wave Function Collapse Explained">
<meta property="og:url" content="https://www.boristhebrave.com/2020/04/13/wave-function-collapse-explained/">
<meta property="og:description" content="A simple guide to constraint solving Since developing DeBroglie and Tessera, I’ve had a lot of requests to explain what it is, how it works. The generation can often seem quite magical, but a…">
<meta property="article:published_time" content="2020-04-13T07:56:14+00:00">
<meta property="article:modified_time" content="2023-01-20T16:22:43+00:00">
<meta property="og:site_name" content="BorisTheBrave.Com">
<meta property="og:image" content="https://www.boristhebrave.com/wp-content/uploads/2018/10/hexmini_out.png">
<meta property="og:image:secure_url" content="https://i0.wp.com/www.boristhebrave.com/wp-content/uploads/2018/10/hexmini_out.png?ssl=1">
<meta property="og:image" content="https://www.boristhebrave.com/wp-content/uploads/2018/10/columns_out.png">
<meta property="og:image:secure_url" content="https://i0.wp.com/www.boristhebrave.com/wp-content/uploads/2018/10/columns_out.png?ssl=1">
<meta property="og:image" content="https://www.boristhebrave.com/wp-content/uploads/2020/04/wfc_sphere.png">
<meta property="og:image:secure_url" content="https://i0.wp.com/www.boristhebrave.com/wp-content/uploads/2020/04/wfc_sphere.png?ssl=1">
<meta property="og:image:alt" content="">
<meta property="og:locale" content="en_GB">
<meta name="twitter:text:title" content="Wave Function Collapse Explained">
<meta name="twitter:image" content="https://www.boristhebrave.com/wp-content/uploads/2018/10/hexmini_out.png?w=1400">
<meta name="twitter:card" content="summary_large_image">

<!-- End Jetpack Open Graph Tags -->
<link rel="icon" href="https://www.boristhebrave.com/wp-content/uploads/2020/09/btb_logo-150x150.png" sizes="32x32">
<link rel="icon" href="https://www.boristhebrave.com/wp-content/uploads/2020/09/btb_logo.png" sizes="192x192">
<link rel="apple-touch-icon" href="https://www.boristhebrave.com/wp-content/uploads/2020/09/btb_logo.png">
<meta name="msapplication-TileImage" content="https://www.boristhebrave.com/wp-content/uploads/2020/09/btb_logo.png">
<style id="wpforms-css-vars-root">
				:root {
					--wpforms-field-border-radius: 3px;
--wpforms-field-background-color: #ffffff;
--wpforms-field-border-color: rgba( 0, 0, 0, 0.25 );
--wpforms-field-text-color: rgba( 0, 0, 0, 0.7 );
--wpforms-label-color: rgba( 0, 0, 0, 0.85 );
--wpforms-label-sublabel-color: rgba( 0, 0, 0, 0.55 );
--wpforms-label-error-color: #d63637;
--wpforms-button-border-radius: 3px;
--wpforms-button-background-color: #066aab;
--wpforms-button-text-color: #ffffff;
--wpforms-field-size-input-height: 43px;
--wpforms-field-size-input-spacing: 15px;
--wpforms-field-size-font-size: 16px;
--wpforms-field-size-line-height: 19px;
--wpforms-field-size-padding-h: 14px;
--wpforms-field-size-checkbox-size: 16px;
--wpforms-field-size-sublabel-spacing: 5px;
--wpforms-field-size-icon-size: 1;
--wpforms-label-size-font-size: 16px;
--wpforms-label-size-line-height: 19px;
--wpforms-label-size-sublabel-font-size: 14px;
--wpforms-label-size-sublabel-line-height: 17px;
--wpforms-button-size-font-size: 17px;
--wpforms-button-size-height: 41px;
--wpforms-button-size-padding-h: 15px;
--wpforms-button-size-margin-top: 10px;

				}
			</style><link rel="stylesheet" type="text/css" id="gravatar-card-css" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/hovercard.min.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/services.min.css"><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888; display: contents}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover, .MJXp-munder {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > *, .MJXp-munder > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none; box-sizing: content-box}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_test {font-style: normal; font-weight: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow: hidden; height: 1px}
.MathJax_test.mjx-test-display {display: table!important}
.MathJax_test.mjx-test-inline {display: inline!important; margin-right: -1px}
.MathJax_test.mjx-test-default {display: block!important; clear: both}
.MathJax_ex_box {display: inline-block!important; position: absolute; overflow: hidden; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0; width: 1px; height: 60ex}
.MathJax_em_box {display: inline-block!important; position: absolute; overflow: hidden; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0; width: 1px; height: 60em}
.mjx-test-inline .MathJax_left_box {display: inline-block; width: 0; float: left}
.mjx-test-inline .MathJax_right_box {display: inline-block; width: 0; float: right}
.mjx-test-display .MathJax_right_box {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?V=2.7.9') format('opentype')}
@font-face {font-family: MathJax_Main-bold; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?V=2.7.9') format('opentype')}
@font-face {font-family: MathJax_Main-italic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?V=2.7.9') format('opentype')}
@font-face {font-family: MathJax_Math-italic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?V=2.7.9') format('opentype')}
@font-face {font-family: MathJax_Caligraphic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?V=2.7.9') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?V=2.7.9') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?V=2.7.9') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?V=2.7.9') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?V=2.7.9') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?V=2.7.9') format('opentype')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>

<body class="post-template-default single single-post postid-491 single-format-standard"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="https://www.boristhebrave.com/2020/04/13/wave-function-collapse-explained/#content">Skip to content</a>
	<header id="masthead" class="site-header" role="banner">
		<div class="site-branding">
			<a href="https://www.boristhebrave.com/" class="site-logo-link" rel="home" itemprop="url"></a>			<h1 class="site-title"><a href="https://www.boristhebrave.com/" rel="home">BorisTheBrave.Com</a></h1>
			<h2 class="site-description"></h2>
		</div>

		<nav id="site-navigation" class="main-navigation" role="navigation">
			<button class="menu-toggle">Menu</button>
			<div class="menu"><ul class=" nav-menu">
<li><a href="https://www.boristhebrave.com/">Home</a></li><li class="page_item page-item-122"><a href="https://www.boristhebrave.com/about/">About</a></li>
<li class="page_item page-item-1443"><a href="https://www.boristhebrave.com/all-posts/">All Posts</a></li>
<li class="page_item page-item-1547"><a href="https://www.boristhebrave.com/projects/">Projects</a></li>
<li class="page_item page-item-1653"><a href="https://www.boristhebrave.com/socials/">Socials</a></li>
</ul></div>
		</nav><!-- #site-navigation -->
	</header><!-- #masthead -->

	<div id="content" class="site-content">
		
	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			
<article id="post-491" class="post-491 post type-post status-publish format-standard has-post-thumbnail hentry category-beginner category-tutorial tag-procgen tag-wfc wpautop">
	<header class="entry-header">
		<h1 class="entry-title">Wave Function Collapse Explained</h1>
		<div class="entry-meta">
						<span class="posted-on"><a href="https://www.boristhebrave.com/2020/04/13/wave-function-collapse-explained/" rel="bookmark"><time class="entry-date published" datetime="2020-04-13T07:56:14+00:00">2020-04-13</time><time class="updated" datetime="2023-01-20T16:22:43+00:00">2023-01-20</time></a></span><span class="byline"><span class="sep"> | </span><span class="author vcard"><a class="url fn n" href="https://www.boristhebrave.com/author/boris/">Boris</a></span></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

	<div class="entry-content">
		
<p><em>A simple guide to constraint solving</em></p>



<p>Since developing <a href="https://boristhebrave.github.io/DeBroglie/">DeBroglie</a> and <a href="https://assetstore.unity.com/packages/tools/modeling/tessera-procedural-tile-based-generator-155425">Tessera</a>, I’ve had a lot of requests to explain what it is, how it works. The generation can often seem quite magical, but actually the rules underlying it are quite simple.</p>



<p>So, what is the Wave Function Collapse algorithm (WFC)? Well, it’s an <a href="https://github.com/mxgmn/WaveFunctionCollapse">algorithm developed by Maxim Gumin</a> <a href="https://paulmerrell.org/model-synthesis/">based on work by Paul Merrell</a> for generating tile based images based off simple configuration or sample images. If you’ve come here hoping to learn about quantum physics, you are going to be disappointed.</p>



<p>WFC is capable of a lot of stuff – just browse Maxim’s examples, or check out <a href="https://twitter.com/search?q=%23wavefunctioncollapse">#wavefunctioncollapse</a> on twitter, or see my <a href="https://www.youtube.com/watch?v=VkhRvfb9LPs">youtube video</a>.</p>



<figure class="wp-block-video"><video controls="" src="https://www.boristhebrave.com/wp-content/uploads/2020/04/platformer.webm"></video></figure>



<p>WFC is explained briefly in Maxim’s README, but I felt it needed a fuller explanation from first principals. It is a slight twist on a much more broad concept – <a href="https://en.wikipedia.org/wiki/Constraint_programming">constraint programming</a>. So much of this article is going to <strong>explain constraint programming, and we’ll get <a href="https://www.boristhebrave.com/2020/04/13/wave-function-collapse-explained/#back-to-wfc">back to WFC at the end</a></strong>.</p>



<span id="more-491"></span>



<p>Constraint programming is a way of instructing computers. Unlike <a href="https://en.wikipedia.org/wiki/Imperative_programming">imperative programming</a>, where you give a list of explicit instructions, or <a href="https://en.wikipedia.org/wiki/Functional_programming">functional programming</a>, where you give a mathematical function, in constraint programming, you supply the computer with a rigorously defined problem, and then the computer uses built in algorithms to find the solution.</p>



<link rel="stylesheet" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/font-awesome.min.css"><div class="alert alert-warning"><strong>Brevity Alert:</strong> This tutorial covers concepts and ideas more than methods and code. If you are more interested in the implementation, I have an open source WFC library (<a href="https://github.com/BorisTheBrave/DeBroglie">github&nbsp;<span class="fa fa-github fa-lg"></span></a>, <a href="https://boristhebrave.github.io/DeBroglie/">docs&nbsp;<span class="fa fa-github fa-lg"></span></a>) you can use. Though for learning, you are probably better off with <a href="https://github.com/mxgmn/WaveFunctionCollapse">Maxim’s implementation</a>. If you are on Unity, you can purchase <a href="https://assetstore.unity.com/packages/tools/modeling/tessera-procedural-tile-based-generator-155425">Tessera</a>, my asset for doing WFC in unity.</div>



<h2 class="wp-block-heading">Introducing Mini Sudokus</h2>



<p>To illustrate this, I’m going to use (mini) <a href="https://en.wikipedia.org/wiki/Sudoku">Sudokus </a>as an example problem. A mini Sudoku is a puzzle that looks like a 4×4 grid with some of the numbers filled in.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/minidoku1.svg" alt=""></figure></div>


<p>The goal is to fill in each empty square with a number between 1 and 4, respecting the following rules:</p>



<ul>
<li>The numbers 1 to 4 must appear exactly once in each row</li>



<li>The numbers 1 to 4 must appear exactly once in each column</li>



<li>The numbers 1 to 4 must appear exactly once in each of the corner 2×2 boxes </li>
</ul>



<p>Obeying these rules, you eventually find the solution:</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/minidoku2.svg" alt=""></figure></div>


<p>You could probably solve this for yourself with no difficulty, but what we are interested in is how a computer would solve this problem. There’s two parts to this: specifying the problem to the computer, and then using an algorithm to solve it.</p>



<h2 class="wp-block-heading">Specifing the problem</h2>



<p>Typically, you’d use a constraint programming language to do this. There’s several of these, but they all work in similar ways.</p>



<p>First you must define the <strong>variables</strong> of the problem. A variable is not like in normal programming. In a constraint solver, it means an unknown value we want to find a solution for. In our mini Sudoku example, we would create a variable for each empty square. For convenience, we can also create a variable for the filled squares too.</p>



<p>For each variable, you then define the <strong>domain</strong>, the set of values that it’s possible for it to take. In mini Sudoku, the domain is <code>{1, 2, 3, 4}</code> for every empty square. And the domain would be <code>{1}</code> for a square that is already filled in with a 1.</p>



<p>Finally, you specify the <strong>constraints</strong>, the rules that relate variables together. Most constraint programming languages have a pre-existing constraint function called <code>all_distinct(..)</code>, which requires that the variables passed in have to be distinct. So the rules for mini Sudoku translate into 12 all_distinct constraints – one for each row, column, and 2×2 corner box. We only need one sort of constraint for this problem, but constraint solvers usually come packed with a large library of different constraint types to describe your problem.</p>



<div class="alert alert-warning"><strong>Note</strong>: In practice, constraint programming languages support arrays, so there are neater ways to express this problem. You can find plenty of Sudoku solving articles on the web if you are interested.</div>



<h2 class="wp-block-heading">Constraint Solving Algorithms</h2>



<p>There’s actually several different solving techniques involved in this sort of problem. But I’ll walk you through the simplest to give you an idea for how they work. Here’s the domains shown on the diagram:</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/minidoku3.svg" alt=""></figure></div>


<p>I’ve written multiple numbers in each cell, indicating all possible values in the domain for that variable.</p>



<p>Now let’s consider the first constraint. It requires that the four cells in the top row must all be distinct. But, we <em>already</em> have a 4 in one of those cells. That must mean the other 3 cells <em>cannot</em> be a 4. So, we can remove 4 from the domain of those cells.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/minidoku4.svg" alt=""></figure></div>


<p>We can systematically repeat that process on all twelve constraints. This process is called <strong>constraint propagation</strong>, as information propagates from one variable to another via constraints.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/minidoku5.svg" alt=""></figure></div>


<p>And lo, we have some variables that only have a single value left in their domain. That means, they <strong>must</strong> be the correct solution for those variables.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/minidoku6.svg" alt=""></figure></div>


<p>After doing that, it looks like we might benefit from doing more constraint propagation – those newly minted 1s imply that the other variables cannot be 1, which means there will be more variables with a single valued domain, which means more to propagate. Repeat this process enough times, and the entire puzzle is solved.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/minidoku2.svg" alt=""></figure></div>


<h2 class="wp-block-heading">A harder problem</h2>



<p>Sadly, not all logic puzzles yield the answer this quickly. Here is a full size sudoku puzzle. It works the same, except there are now 9 different values, 9 rows, 9 columns, and 9 3×3 boxes.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/sudoku1.svg" alt=""></figure></div>


<p>If we try the procedure we desribed before, we get stuck:</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/sudoku2.svg" alt=""></figure></div>


<p>At this point, all constraints are fully propagated, but there are still many variables that are uncertain.</p>



<p>At this point, the way a human would solve this, and a computer algorithm diverge. Tutorials for humans now instruct you to start looking for increasingly sophisticated logical inferences. We don’t want our computer algorithm to do that – it’s complicated, and we want a <em>general </em>algorithm which will work with any set of constraints, not just sudokus specifically.</p>



<p>So instead, computers do the dumbest possible thing: <strong>they guess</strong>. First, we record the current state of the puzzle. Then, we pick an arbitrary variable, and set its value to one of its possible values. Let’s pick the central square, and set the value to 1. </p>



<p>We can now make further progress by propagating constraints a bit more. Below, I’ve re-evaluated the constraint for the central column repeatedly, until we’ve got the following.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/sudoku3.svg" alt=""></figure></div>


<p>The blue values are all the inferences we made since guessing. And you can see, something special has happened. A few more variables have been solved, but look at the center-topmost square. It is empty – there is <strong>no possible value in the domain</strong> that satifies all the constraints of that square (it cannot be 5 as there is a 5 in the same 3×3 box, and cannot be any other number due to the column).</p>



<p>If we ever get a variable with an empty domain, it means it is not possible to assign that variable. Which means that the puzzle cannot be completed. Which means that <strong>our guess must have been wrong</strong>.</p>



<p>When we’ve found a contradiction like this, we do a procedure called <strong>backtracking</strong>. First, we restore the puzzle to the state we had before the guess. Second, we remove the guessed value from the domain of the guessed variable. We do this because we now know that picking that value leads to problems, therefore it cannot be the right answer.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/sudoku4.svg" alt=""></figure></div>


<p>Well, that was a lot of work, but we’ve now made a small amount of progress. Having eliminated 1 from the central square, we’re still stuck. So it’s time to guess again – and again and again.</p>



<p>There’s not really much more to the algorithm. Each time you get stuck propagating, make a guess and continue. Each time you find a contradiction, backtrack to the most recent save, and eliminate the guess as a possibility. Because you might get stuck several times before reaching a contradiction, you end up with a stack of saved states and guesses.</p>



<p>Every time you backtrack you reduce the domain of at least one variable, so even though there is a lot of giving up and restarting involved, the algorithm is guaranteed to <em>eventually</em> terminate.</p>



<p>There’s a lot more on this subject that I won’t cover here. In practice, optimizations like picking the guesses, knowing when to bother propagating, and when to make more sophisticated inferences can all make a huge difference to the actual execution of the program. And as constraint problems are typically exponential growth, it can make the difference between getting an answer today, and getting it in 5000 years.</p>



<h2 class="wp-block-heading" id="back-to-wfc">Back to WFC</h2>



<p>Wave Function Collapse is a constraint problem with a twist – there are thousands of possible solutions. The idea is that if we make our guesses at random, instead of getting a <em>solver</em>, we get a <em>generator</em>. But that generator will still obey all the contraints that we specify, thus making it much more controllable than a lot of other procedural generation.</p>



<p>In WFC, the goal is to fill in a grid with tiles such that nearby tiles connect to each other. In the terminology we used above, each tile is a different value, and each cell in the grid is a variable representing the choice of tile. And the rules about which tiles can be placed where are the constraints.</p>



<p>Maxim discovered that with a reasonable choice of tiles, and a sensible randomization routine, it’s rarely necessary to backtrack so we can skip implementing that. That means that the WFC algorithm, at its most basic, looks like the following:</p>



<ul>
<li>For each cell, create a boolean array representing the domain of that variable. The domain has one entry per tile, and they are all initialized to true. A tile is in the domain if that entry is true.</li>



<li>While there are still cells that have multiple items in the domain:
<ul>
<li>Pick a random cell using the “least entropy” heuristic.</li>



<li>Pick a random tile from that cell’s domain, and remove all other tiles from the domain.</li>



<li>Update the domains of other cells based on this new information, i.e. propagate cells. This needs to be done repeatedly as changes to those cells may have further implications.</li>
</ul>
</li>
</ul>



<div class="alert alert-warning"><strong>Note</strong>: My terminology differs from a bit from Maxim’s. He would call the array of domains a Wave, and choosing a random tile an Observation, making a rough analogy to quantum mechanics. But it’s a shallow comparison, so we’ll ignore it.</div>



<p>There’s a lot of extensions to the above to make it fancier and more performant, but let’s first discuss those steps in details.</p>



<h3 class="wp-block-heading">Example</h3>



<p>Let’s suppose we want to fill a 3 by 3 grid with the following set of 4 tiles:</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/tiles.svg" alt=""></figure></div>


<p>The constraints we are going to use are that the colors on adjacent tiles must match up with each other.</p>



<p>Like with the sudoku example, I’ll use small grey pictures to indicate what is in the domain. Once there’s only a single item left in the domain, I’ll show it larger and full color.</p>



<p>Initially, every cell is possible at every grid location.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/wfc_demo_grid1.svg" alt=""></figure></div>


<p>Now we repeat the main loop of WFC. First, we randomly pick a cell, lets say the top left. Then we pick a tile in the domain, and remove all the other ones.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/wfc_demo_grid2-1.svg" alt=""></figure></div>


<p>Then we propagate the constraints. The only rule we have is about adjacent tiles, so we need to update two cells:</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/wfc_demo_grid3.svg" alt=""></figure></div>


<p>Are there any more tiles to update given the smaller domains? Yes! Even though we are still uncertain about the exact choice of tile at the top-center, we can see that all the remaining choices lead off to the right. That means some tiles at the top right are not possible. Similarly the bottom left.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/wfc_demo_grid4.svg" alt=""></figure></div>


<p>There’s no more propagation to do, so we re-do the main loop – select a cell, select a tile, and propagate. This time, the top-center tile was selected and a few more tiles were eliminated as possibilities.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/wfc_demo_grid5.svg" alt=""></figure></div>


<p>One more loop. This time the center-left tile was selected, and after propagation, there was only one remaining possibility for the center tile.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large"><img decoding="async" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/wfc_demo_grid6-1.svg" alt=""></figure></div>


<p>Hopefully you get the idea at this point. You can go on to fill the whole grid.</p>



<p>If you want a <strong>more advanced, interactive example</strong>, I can recommend playing around with this <a href="http://oskarstalberg.com/game/wave/wave.html">toy by Oskar Stålberg</a>.</p>



<h3 class="wp-block-heading">Least Entropy</h3>



<p>When picking the next tile to fill in, some choices are better than others. If you randomly pick from anywhere in the grid, you can end up filling in multiple areas at the same time. That can cause problems – depending on the tileset, it may not be possible to join up the filled areas when the time comes. We want to pick cells that are least likely to cause trouble later. There’s an obvious choice for this – pick the cell with the fewest possible values remaining in the domain (but at least 2 possibilities). This is a good choice as:</p>



<ol>
<li>it’s likely to be near other filled cells</li>



<li>if we leave it until later, it could be trouble as there are already few possibilities</li>
</ol>



<p>Using the smallest domain works fine if all tiles are equally likely.  But if you are choosing the tiles from a <a href="https://www.rubyguides.com/2016/05/weighted-random-numbers/">weighted random distribution</a>, you need to do something different to take that into account. Maxim recommends “minimal <a href="https://en.wikipedia.org/wiki/Entropy_(information_theory)">entropy</a>“, which is selecting the cell that minimizes:</p>



<p><code></code><span class="MathJax_Preview" style="color: inherit;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;entropy&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mo&gt;&amp;#x2211;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mstyle displaystyle=&quot;false&quot; scriptlevel=&quot;0&quot;&gt;&lt;mtext&gt;log&lt;/mtext&gt;&lt;/mstyle&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 11.574em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.002em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(2.145em, 1010.91em, 3.812em, -999.998em); top: -3.236em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mstyle" id="MathJax-Span-3"><span class="mrow" id="MathJax-Span-4"><span class="mtext" id="MathJax-Span-5" style="font-family: MathJax_Main;">entropy</span></span></span><span class="mo" id="MathJax-Span-6" style="font-family: MathJax_Main; padding-left: 0.288em;">=</span><span class="mo" id="MathJax-Span-7" style="font-family: MathJax_Main; padding-left: 0.288em;">−</span><span class="mo" id="MathJax-Span-8" style="font-family: MathJax_Size2; vertical-align: 0em; padding-left: 0.193em;">∑</span><span class="msubsup" id="MathJax-Span-9" style="padding-left: 0.193em;"><span style="display: inline-block; position: relative; width: 0.812em; height: 0px;"><span style="position: absolute; clip: rect(3.431em, 1000.48em, 4.336em, -999.998em); top: -3.998em; left: 0em;"><span class="mi" id="MathJax-Span-10" style="font-family: MathJax_Math-italic;">p</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -3.855em; left: 0.526em;"><span class="mi" id="MathJax-Span-11" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mstyle" id="MathJax-Span-12"><span class="mrow" id="MathJax-Span-13"><span class="mtext" id="MathJax-Span-14" style="font-family: MathJax_Main;">log</span></span></span><span class="mo" id="MathJax-Span-15" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-16"><span style="display: inline-block; position: relative; width: 0.812em; height: 0px;"><span style="position: absolute; clip: rect(3.431em, 1000.48em, 4.336em, -999.998em); top: -3.998em; left: 0em;"><span class="mi" id="MathJax-Span-17" style="font-family: MathJax_Math-italic;">p</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -3.855em; left: 0.526em;"><span class="mi" id="MathJax-Span-18" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-19" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 3.24em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.552em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mstyle displaystyle="false" scriptlevel="0"><mtext>entropy</mtext></mstyle><mo>=</mo><mo>−</mo><mo>∑</mo><msub><mi>p</mi><mi>i</mi></msub><mstyle displaystyle="false" scriptlevel="0"><mtext>log</mtext></mstyle><mo stretchy="false">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-1"> \mbox{entropy} = -\sum p_i \mbox{log}(p_i) </script></p>



<p>Summing over tiles in the domain, where <img src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/latex.php" alt="p_i" class="latex"> is the probability associated with that tile.</p>



<h3 class="wp-block-heading">Efficient Computation</h3>



<p>Though I don’t want to get too much detail, there are two optimizations which make such a large difference to speed it would be negligent not to mention them.</p>



<p>Firstly, because the only constraints we have are to do with adjacent tiles, we can use that to only check constraints that could give different results to before. That means when we update a cell, we add it to a queue of pending cells. Then we remove pending cells one at a time, and check their adjacencies. If those checks result in updating more cells, those also go on the stack. By repeating until the stack is empty, we have ensured that every constraint has been fully evaluated, but we never check a constraint unless one of the cells associated with it has changed domains.</p>



<p>Secondly, in order to check an adjacency constraint, we need to answer a question of the form “given the tiles in the domain of cell X, which tiles in the domain of adjacent cell Y are possible”.</p>



<p>This question is sometimes called the “support” of X. It’s straightforward to calculate: for a given tile y in Y’s domain, loop over the tiles in X’s domain. If there’s at least one tile in X can be placed next to y, then y is still ok, at least as far as this tile pair is concenred. If there’s no such tile in X, then it’s impossible to place y in Y, and we can eliminate it.</p>



<p>Using loops, this can be coded easily, but it can be incredibly slow. Instead, if we store an extra data structure we can quickly answer this question when it comes up. The new data is a big array with an entry for each side of each cell, for each tile. E.g. in our example above with 9 cells, each having 4 sides, and 4 tiles, we’d need 9 * 4 * 4 entries. In the array, we store the count of the support, i.e. for a given cell/tile/side, we count how many tiles in the domain on adjacent cell can be placed next to the tile in question. These numbers can be straightforwardly updated every time we update the domain. If the count ever drops to zero, then we know the tile cannot be placed, as there’s nothing that could go adjacent to it.</p>



<h2 class="wp-block-heading">Extensions</h2>



<p>Because WFC is based on the broader notion constraint solving, there’s a lot of ways we can extend it by changing the constraints we use.</p>



<p>One obvious change is there’s no requirement to use square grids. WFC works just as well on <a href="https://boristhebrave.github.io/DeBroglie/articles/features.html#topology">hex grids, in 3d</a>, or more <a href="https://twitter.com/boris_brave/status/1244387278732091392">unusual sufaces</a>.</p>



<figure class="wp-block-gallery has-nested-images columns-default is-cropped wp-block-gallery-1 is-layout-flex">
<figure class="wp-block-image size-large"><img decoding="async" loading="lazy" width="427" height="183" data-id="317" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/hexmini_out.png" alt="" class="wp-image-317" srcset="https://www.boristhebrave.com/wp-content/uploads/2018/10/hexmini_out.png 427w, https://www.boristhebrave.com/wp-content/uploads/2018/10/hexmini_out-300x129.png 300w" sizes="(max-width: 427px) 100vw, 427px"></figure>



<figure class="wp-block-image size-large"><img decoding="async" loading="lazy" width="275" height="275" data-id="315" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/columns_out.png" alt="" class="wp-image-315" srcset="https://www.boristhebrave.com/wp-content/uploads/2018/10/columns_out.png 275w, https://www.boristhebrave.com/wp-content/uploads/2018/10/columns_out-150x150.png 150w" sizes="(max-width: 275px) 100vw, 275px"></figure>



<figure class="wp-block-image size-large"><img decoding="async" loading="lazy" width="599" height="543" data-id="537" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/wfc_sphere.png" alt="" class="wp-image-537" srcset="https://www.boristhebrave.com/wp-content/uploads/2020/04/wfc_sphere.png 599w, https://www.boristhebrave.com/wp-content/uploads/2020/04/wfc_sphere-300x272.png 300w" sizes="(max-width: 599px) 100vw, 599px"></figure>
</figure>



<p>We can also introduce additional constraints, and fix particular tiles, or create “modules” which are tiles that span multiple cells.</p>



<p>Adding extra constraints can be quite important from a practical point of view. Because WFC only constrains nearby tiles, it rarely generates large scale structures, which can give large levels a homogenous, unplanned look. The best results seem to come when you let WFC do the tile picking, but a different technique or constraint to ensure some large structure.</p>



<p>I go into some detail how ways to get the best out of WFC in my <a href="https://www.boristhebrave.com/2020/02/08/wave-function-collapse-tips-and-tricks/">tips and tricks article</a>.</p>



<h3 class="wp-block-heading">Overlapped WFC</h3>



<p>One extension that is particularly interesting is “overlapped” WFC. In the above examples above the main constraint was concerned with pairs of tiles that are adjacent. That is sufficient to ensure lines join up, and create simple structures like caves and rooms and so on. But it still loses a lot of information. If we want that, say, red tiles are always near blue tiles, but never directly adjacent, it is hard to express this in terms of adjacencies only.</p>



<p>Enter overlapped WFC (also proposed by Maxim Gumin). We replace the adjacency constraints with a new constraint that affects multiple tiles at once: We require that each 3×3 group of cells in the output corresponds to a 3×3 group in a sample grid. The patterns that occur in the sample will get repeated over and over again in different variations in the ouput: </p>


<div class="wp-block-image">
<figure class="aligncenter size-full"><img decoding="async" loading="lazy" width="708" height="192" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/wfc-local-similarity.png" alt="" class="wp-image-1659" srcset="https://www.boristhebrave.com/wp-content/uploads/2023/01/wfc-local-similarity.png 708w, https://www.boristhebrave.com/wp-content/uploads/2023/01/wfc-local-similarity-300x81.png 300w" sizes="(max-width: 708px) 100vw, 708px"></figure></div>


<p>This constraint is vastly more sensitive than the “simple” adjacency constraints. And because it works from a given example, it’s very intuitive for artistic direction. So far, I haven’t seen nearly as much interest. That could be because it is harder to implement, slower to run or perhaps because it can sometimes be too good at reproducing the original sample, losing some of the organic feel.</p>



<h2 class="wp-block-heading">Where to next?</h2>



<p>Well, hopefully this tutorial has give you some idea how constraint solving and WFC works. Constraint solving is a large and active area of computer science, I barely touched on how it works here. You can find more information on <a href="https://en.wikipedia.org/wiki/Constraint_programming">Wikipedia</a>.</p>



<p>While this sort of constraint solving dates to 2009, WFC itself is still relatively new. I recomend checking our <a href="https://www.reddit.com/r/proceduralgeneration/">r/proceduralgeneration</a>,  <a href="https://twitter.com/search?q=%23wavefunctioncollapse">#wavefunctioncollapse</a> and <a href="https://twitter.com/ExUtumno">@exutumno</a>, <a href="https://twitter.com/OskSta">@osksta</a> to get a show case of the latest projects people have been trying.</p>



<p>From me, you can read my <a href="https://www.boristhebrave.com/2020/02/08/wave-function-collapse-tips-and-tricks/">WFC tips and tricks article</a>, or experiment with my <a href="https://github.com/BorisTheBrave/DeBroglie">open source library</a> or <a href="https://assetstore.unity.com/packages/tools/modeling/tessera-procedural-tile-based-generator-155425">Unity asset for WFC</a>. I’ve several other articles on <a href="https://www.boristhebrave.com/tag/procgen/">procedural generation</a> too. Let me know in the comments any feedback on the article, or what you’d like to hear about next.</p>
			</div><!-- .entry-content -->

	<footer class="entry-footer">
				<span class="cat-links">
			Posted in <a href="https://www.boristhebrave.com/category/beginner/" rel="category tag">Beginner</a>, <a href="https://www.boristhebrave.com/category/tutorial/" rel="category tag">Tutorial</a>		</span>
						<span class="tags-links">
			<a href="https://www.boristhebrave.com/tag/procgen/" rel="tag">procgen</a><a href="https://www.boristhebrave.com/tag/wfc/" rel="tag">wfc</a>		</span>
			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

				<nav class="navigation post-navigation" role="navigation">
		<h1 class="screen-reader-text">Post navigation</h1>
		<div class="nav-links">
			<div class="nav-previous"><a href="https://www.boristhebrave.com/2020/02/08/wave-function-collapse-tips-and-tricks/" rel="prev"><span class="meta-nav">&lt;</span> Wave Function Collapse tips and tricks</a></div><div class="nav-next"><a href="https://www.boristhebrave.com/2020/06/24/level-generation-in-slige/" rel="next">Level Generation in SLIGE (Doom level generator) <span class="meta-nav">&gt;</span></a></div>		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
	
			
<div id="comments" class="comments-area">

	
			<h2 class="comments-title">
			One thought on “<span>Wave Function Collapse Explained</span>”		</h2>

		
		<ol class="comment-list">
					<li id="comment-49" class="comment even thread-even depth-1">
			<article id="div-comment-49" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/6760df4d5dd2613b82b9f72762075903.jpeg" srcset="https://secure.gravatar.com/avatar/6760df4d5dd2613b82b9f72762075903?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo grav-hashed grav-hijack" height="60" width="60" loading="lazy" decoding="async" id="grav-6760df4d5dd2613b82b9f72762075903-0">						<b class="fn">brainwipe</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://www.boristhebrave.com/2020/04/13/wave-function-collapse-explained/#comment-49"><time datetime="2020-09-01T06:39:01+00:00">2020-09-01 at 6:39 am</time></a>					</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Boris, just wanted to leave a thank you for your tutorial, its methodical explanation meant that I was able to get my own WFC running with minimal effort. I’ve given you a shout out/thank you on my latest video. <a href="https://www.youtube.com/watch?v=axyzuhGdBHM" rel="nofollow ugc">https://www.youtube.com/watch?v=axyzuhGdBHM</a></p>
				</div><!-- .comment-content -->

							</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
			<p class="no-comments">Comments are closed.</p>
	
	
</div><!-- #comments -->

		
		</main><!-- #main -->
	</div><!-- #primary -->

	<div id="secondary" class="widget-area" role="complementary">
		<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://www.boristhebrave.com/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search …" value="" name="s">
				</label>
				<input type="submit" class="search-submit" value="Search">
			</form></aside>
		<aside id="recent-posts-2" class="widget widget_recent_entries">
		<h1 class="widget-title">Recent Posts</h1>
		<ul>
											<li>
					<a href="https://www.boristhebrave.com/2023/07/08/0-999-1-with-rigour/">0.999… = 1, with Rigour</a>
									</li>
											<li>
					<a href="https://www.boristhebrave.com/2023/06/04/wang-tileset-creator/">Wang Tileset Creator</a>
									</li>
											<li>
					<a href="https://www.boristhebrave.com/2023/05/31/ortho-tiles/">Ortho-tiles</a>
									</li>
											<li>
					<a href="https://www.boristhebrave.com/2023/05/31/quarter-tile-autotiling/">Quarter-Tile Autotiling</a>
									</li>
											<li>
					<a href="https://www.boristhebrave.com/2023/05/30/projects-using-my-software/">Projects Using My Software</a>
									</li>
					</ul>

		</aside><aside id="block-3" class="widget widget_block">
<h2 class="wp-block-heading">Archives</h2>
</aside><aside id="block-2" class="widget widget_block widget_archive"><ul class="wp-block-archives-list wp-block-archives">	<li><a href="https://www.boristhebrave.com/2023/">2023</a>&nbsp;(11)</li>
	<li><a href="https://www.boristhebrave.com/2022/">2022</a>&nbsp;(11)</li>
	<li><a href="https://www.boristhebrave.com/2021/">2021</a>&nbsp;(21)</li>
	<li><a href="https://www.boristhebrave.com/2020/">2020</a>&nbsp;(11)</li>
	<li><a href="https://www.boristhebrave.com/2019/">2019</a>&nbsp;(3)</li>
	<li><a href="https://www.boristhebrave.com/2018/">2018</a>&nbsp;(7)</li>
	<li><a href="https://www.boristhebrave.com/2017/">2017</a>&nbsp;(3)</li>
	<li><a href="https://www.boristhebrave.com/2015/">2015</a>&nbsp;(1)</li>
	<li><a href="https://www.boristhebrave.com/2014/">2014</a>&nbsp;(1)</li>
	<li><a href="https://www.boristhebrave.com/2013/">2013</a>&nbsp;(2)</li>
	<li><a href="https://www.boristhebrave.com/2011/">2011</a>&nbsp;(1)</li>
	<li><a href="https://www.boristhebrave.com/2010/">2010</a>&nbsp;(2)</li>
	<li><a href="https://www.boristhebrave.com/2009/">2009</a>&nbsp;(6)</li>
	<li><a href="https://www.boristhebrave.com/2008/">2008</a>&nbsp;(5)</li>
</ul></aside><!--
Plugin: Custom Meta Widget
Plugin URL: http://shinraholdings.com/plugins/custom-meta-widget/
-->
<aside id="custommetawidget-3" class="widget customMetaWidget"><h1 class="widget-title">Meta</h1>		<ul>

		
		
					<li><a href="https://www.boristhebrave.com/feed/">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
		

		
			<li><a href="https://www.boristhebrave.com/comments/feed/">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
		
				</ul>

	</aside>	</div><!-- #secondary -->

	</div><!-- #content -->

	<footer id="colophon" class="site-footer" role="contentinfo">
				<div class="site-info">
			<a href="http://wordpress.org/">Proudly powered by WordPress</a>
			<span class="sep"> | </span>
			Theme: Sketch by <a href="https://wordpress.com/themes/" rel="designer">WordPress.com</a>.		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</div><!-- #page -->

	<div style="display:none">
			<div class="grofile-hash-map-6760df4d5dd2613b82b9f72762075903">
		</div>
		</div>
		<link rel="stylesheet" id="hljstheme-css" href="./Wave Function Collapse Explained – BorisTheBrave.Com_files/default.min.css" type="text/css" media="all">
<style id="core-block-supports-inline-css" type="text/css">
.wp-block-gallery.wp-block-gallery-1{--wp--style--unstable-gallery-gap:var( --wp--style--gallery-gap-default, var( --gallery-block--gutter-size, var( --wp--style--block-gap, 0.5em ) ) );gap:var( --wp--style--gallery-gap-default, var( --gallery-block--gutter-size, var( --wp--style--block-gap, 0.5em ) ) );}
</style>
<script type="text/javascript" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/gprofiles.js.Download" id="grofiles-cards-js"></script>
<script type="text/javascript" id="wpgroho-js-extra">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/wpgroho.js.Download" id="wpgroho-js"></script>
<script type="text/javascript" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/navigation.js.Download" id="sketch-navigation-js"></script>
<script type="text/javascript" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/skip-link-focus-fix.js.Download" id="sketch-skip-link-focus-fix-js"></script>
<script defer="" type="text/javascript" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/e-202328.js.Download" id="jetpack-stats-js"></script>
<script type="text/javascript" id="jetpack-stats-js-after">
_stq = window._stq || [];
_stq.push([ "view", {v:'ext',blog:'128609145',post:'491',tz:'0',srv:'www.boristhebrave.com',j:'1:12.3'} ]);
_stq.push([ "clickTrackerInit", "128609145", "491" ]);
</script>
<script type="text/javascript" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/highlight.min.js.Download" id="hljs-js"></script>
<script type="text/javascript" src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/MathJax.js.Download" id="mathjax-js"></script>
    <style>pre.hljs {padding: 5px;}
pre.hljs code {}</style>
    <script type="text/javascript">
    (function($, window) {
        var init_fn_flag = false;
        var init_fn = (function() {
            if (init_fn_flag)
                return;
            init_fn_flag = true;
             hljs.configure({"tabReplace":"    "});
            $('pre code').each(function(i, block) {
                hljs.highlightBlock(block);
            });
        });
        $(document).ready(init_fn);
        $(window).on("load", init_fn);
    })(jQuery, window);
    </script>







<img src="./Wave Function Collapse Explained – BorisTheBrave.Com_files/g.gif" alt="" width="6" height="5" id="wpstats"><div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; min-width: 0px; max-width: none; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_Math-italic, sans-serif;"></div></div></body></html>